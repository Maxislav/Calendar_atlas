var calendarModule=angular.module("calendarModule",[]).constant("constantCalendar",{days:["П","B","C","Ч","П","С","B"],month:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]});calendarModule.directive("calendar",["$compile","$templateCache","constantCalendar",function(a,b,c){function d(a){function b(a){return c==a.getTime()?!0:!1}for(var c=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()).getTime(),d=[],e=0;50>e;e++){var f=new Date(a.getFullYear(),a.getMonth(),e);f.getMonth()==a.getMonth()&&d.push({date:f,value:f.getTime(),dayWeek:f.getDay(),"class":b(f)?"current":""})}for(var g=0==d[0].dayWeek?6:d[0].dayWeek-1,h=7-d[d.length-1].dayWeek,e=0;g>e;e++)d.unshift(null);for(var e=0;h>e;e++)d.push(null);for(var i=parseFloat((d.length/7).toFixed(0)),j=[],k=0,e=0;i>e;e++){j[e]=[];for(var f=0;7>f;f++)j[e].push(d[k]),k++}return j}return{restrict:"EA",replace:!0,templateUrl:"module/partials/calendar-label.html",scope:{before:"=before",after:"=after"},controller:["$scope","$element","$attrs","$timeout","$templateCache",function(b,e,f,g,h){function i(){var c=a(h.get("module/partials/calendar-view.html"));j=c(b),e.append(j)}var j=null;b.show=!1,b.constantCalendar=c;var k=new Date;b.arrMonth=d(k),b.arrMonth.value=k.getTime();var l=new Date(k.getFullYear(),k.getMonth()-1,1);b.arrMonthBefore=d(l),b.arrMonthBefore.value=l.getTime();var m=new Date(k.getFullYear(),k.getMonth()+1,1);b.arrMonthAfter=d(m),b.arrMonthAfter.value=m.getTime(),b.click=function(){j||i(),b.show=!b.show},console.log(b.before)}]}}]),calendarModule.directive("daysweek",["$compile",function(){return{restrict:"E",replace:!0,templateUrl:"module/partials/calendar-days.html"}}]),angular.module("calendarModule").run(["$templateCache",function(a){"use strict";a.put("module/partials/calendar-days.html",'<div class="row days"><div class="col-day text-right" ng-repeat="days in constantCalendar.days track by $index"><span ng-switch="$index"><span ng-switch-when="6" class="red">{{days}}</span> <span ng-switch-when="5" class="red">{{days}}</span> <span ng-switch-default>{{days}}</span></span></div></div>'),a.put("module/partials/calendar-label.html",'<div class="calendar-label"><div class="calendar-label-btn">Дата</div><div class="calendar-label-ico" ng-click="click()"><div class="ico-calendar">&nbsp;</div></div></div>'),a.put("module/partials/calendar-view.html",'<div ng-show="show" class="calendar-view"><div class="container-months"><div class="block-month"><daysweek></daysweek><div class="row name-month">{{arrMonthBefore.value | date:\'MMMM\'}}</div><div class="numeric"><div class="row" ng-repeat="week in arrMonthBefore track by $index"><div class="col-day text-right {{day.class}}" ng-repeat="day in arrMonthBefore[$index] track by $index"><span ng-switch="$index"><span ng-switch-when="6" class="red">{{day.value | date:\'d\'}}</span> <span ng-switch-when="5" class="red">{{day.value | date:\'d\'}}</span> <span ng-switch-default>{{day.value | date:\'d\'}}</span></span></div></div></div></div><!--Середина--><div class="block-month"><daysweek></daysweek><div class="row name-month">{{arrMonth.value | date:\'MMMM\'}}</div><div class="numeric"><div class="row" ng-repeat="week in arrMonth track by $index"><div class="col-day text-right {{day.class}}" ng-repeat="day in arrMonth[$index] track by $index"><span ng-switch="$index"><span ng-switch-when="6" class="red">{{day.value | date:\'d\'}}</span> <span ng-switch-when="5" class="red">{{day.value | date:\'d\'}}</span> <span ng-switch-default>{{day.value | date:\'d\'}}</span></span></div></div></div></div><!--Сдедующий--><div class="block-month"><daysweek></daysweek><div class="row name-month">{{arrMonthAfter.value | date:\'MMMM\'}}</div><div class="numeric"><div class="row" ng-repeat="week in arrMonthAfter track by $index"><div class="col-day text-right {{day.class}}" ng-repeat="day in arrMonthAfter[$index] track by $index"><span ng-switch="$index"><span ng-switch-when="6" class="red">{{day.value | date:\'d\'}}</span> <span ng-switch-when="5" class="red">{{day.value | date:\'d\'}}</span> <span ng-switch-default>{{day.value | date:\'d\'}}</span></span></div></div></div></div></div><div class="info-block"><span>{{ after | date:\'medium\' }}</span> - <span>{{ before | date:\'medium\' }}</span></div></div>')}]);var app=angular.module("app",["calendarModule"]);app.controller("defaultContrl",["$scope","$interval",function(a,b){var c=new Date;a.after=new Date(c.getFullYear(),c.getMonth(),c.getDate()-4).getTime(),a.before=(new Date).getTime(),b(function(){a.before=(new Date).getTime()},1e3)}]),angular.module("app").run(["$templateCache",function(a){"use strict";a.put("partials/xx.html","<!DOCTYPE html><html><head><title></title></head><body></body></html>")}]);