var calendarModule=angular.module("calendarModule",[]).constant("constantCalendar",{days:["П","B","C","Ч","П","С","B"],month:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]});calendarModule.directive("calendar",["$compile","$templateCache","constantCalendar",function(a,b,c){function d(a,b){function c(a){var b="";return d==a.getTime()&&(b+="current"),e==a.getTime()&&(b+=" select"),b}for(var d=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()).getTime(),e=new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime(),f=[],g=0;50>g;g++){var h=new Date(a.getFullYear(),a.getMonth(),g);h.getMonth()==a.getMonth()&&f.push({date:h,value:h.getTime(),dayWeek:h.getDay(),"class":c(h)})}for(var i=0==f[0].dayWeek?6:f[0].dayWeek-1,j=7-f[f.length-1].dayWeek,g=0;i>g;g++)f.unshift(null);for(var g=0;j>g;g++)f.push(null);for(var k=parseFloat((f.length/7).toFixed(0)),l=[],m=0,g=0;k>g;g++){l[g]=[];for(var h=0;7>h;h++)l[g].push(f[m]),m++}return l}return{restrict:"EA",replace:!0,templateUrl:"module/partials/calendar-label.html",scope:{date:"=date"},controller:["$scope","$element","$attrs","$timeout","$templateCache",function(b,e,f,g,h){function i(a){var c=new Date(b.date.getFullYear(),a,b.date.getDate());b.arrMonth=d(c,b.date),b.arrMonth.value=c.getTime()}function j(){var c=a(h.get("module/partials/calendar-view.html"));k=c(b),e.append(k)}var k=null;b.show=!1,b.constantCalendar=c;var l=(b.date,b.date.getMonth());b.arrMonth=d(b.date,b.date),b.arrMonth.value=b.date.getTime(),b.stepBack=function(){l--,i(l)},b.stepForward=function(){l++,i(l)},b.selectEvent=function(a){b.date=new Date(a),b.arrMonth=d(b.date,b.date),b.arrMonth.value=b.date.getTime()},b.click=function(){k||j(),b.show=!b.show}}]}}]),calendarModule.directive("daysweek",["$compile",function(){return{restrict:"E",replace:!0,templateUrl:"module/partials/calendar-days.html"}}]),angular.module("calendarModule").run(["$templateCache",function(a){"use strict";a.put("module/partials/calendar-days.html",'<div class="row days"><div class="col-day text-right" ng-repeat="days in constantCalendar.days track by $index"><span ng-switch="$index"><span ng-switch-when="6" class="red">{{days}}</span> <span ng-switch-when="5" class="red">{{days}}</span> <span ng-switch-default>{{days}}</span></span></div></div>'),a.put("module/partials/calendar-label.html",'<div class="calendar-label"><div class="calendar-label-btn">{{date | date:\'yyyy.MM.dd\'}}</div><div class="calendar-label-ico" ng-click="click()"><div class="ico-calendar">&nbsp;</div></div></div>'),a.put("module/partials/calendar-view.html",'<div ng-show="show" class="calendar-view"><div class="label-close">&nbsp;<div class="button-close" ng-click="click()"></div></div><div class="container-months"><div class="block-month"><daysweek></daysweek><div class="row"><div class="col-2 btn-back" ng-click="stepBack()">&lt;</div><div class="col-8 name-month">{{arrMonth.value | date:\'MMMM yyyy\'}}</div><div class="col-2 btn-forward" ng-click="stepForward()">&gt;</div></div><div class="numeric"><div class="row" ng-repeat="week in arrMonth track by $index"><div class="col-day text-right {{day.class}}" ng-repeat="day in arrMonth[$index] track by $index" ng-click="selectEvent(day.value)"><span ng-switch="$index"><span ng-switch-when="6" class="red">{{day.value | date:\'d\'}}</span> <span ng-switch-when="5" class="red">{{day.value | date:\'d\'}}</span> <span ng-switch-default>{{day.value | date:\'d\'}}</span></span></div></div></div></div></div><div class="info-block"><span>{{ date | date:\'yyyy.MM.dd\' }}</span></div></div>')}]);